<?php	final class Users {		// Добавляем нового пользователя		public static function Add($params) {						$db = DB::getInstance();			$data = array(	'login' => $params['login'],							'password' => $params['password'],							'name' => $params['fio'],							'lang' => $params['lang'],							'group_id' => $params['group_id'],							'enabled' => $params['enabled']						);			$db->insert('users', $data);						$result = DB::getInstance()->select('SELECT max(`id`) AS `new_id` FROM `users`');			return $result[0]['new_id'];		}					// Редактируем пользователя		public static function Edit($params) {					$db = DB::getInstance();			$data = array(	'login' => $params['login'],							'name' => $params['fio'],							'lang' => $params['lang'],							'group_id' => $params['group_id'],							'enabled' => $params['enabled']						);			if (!empty($params['password'])) $data['password'] = $params['password'];			$db->update('users', $data, 'id LIKE "'.$params['uid'].'"');			return $params['uid'];		}			// Удаляем пользователя		public static function Delete($user_id) {			$db = DB::getInstance()->query('UPDATE `users` SET `enabled` = 0 WHERE `id` LIKE "'.$user_id.'"');			return 'DeleteOK';		}															// Добавляем новую группу		public static function GroupAdd($params) {						$db = DB::getInstance();			$data = array(	'name' => $params['name'],							'description_rus' => $params['description_rus'],							'description_eng' => $params['description_eng'],							'access_full' => $params['access_full'],							'root' => $params['root']						);			$db->insert('groups', $data);			$result = DB::getInstance()->select('SELECT max(`id`) AS `new_id` FROM `groups`');			return $result[0]['new_id'];		}					// Редактируем группу		public static function GroupEdit($params) {					$db = DB::getInstance();			$data = array(	'name' => $params['name'],							'description_rus' => $params['description_rus'],							'description_eng' => $params['description_eng'],							'access_full' => $params['access_full'],							'root' => $params['root']						);			$db->update('groups', $data, 'id LIKE "'.$params['gid'].'"');			return $params['gid'];		}			// Удаляем группу		public static function GroupDelete($group_id) {			$db = DB::getInstance()->query('UPDATE `users` SET `enabled` = 0 WHERE `group_id` LIKE "'.$group_id.'"');			$db = DB::getInstance()->query('DELETE FROM `groups` WHERE `id` LIKE "'.$group_id.'"');			return 'DeleteOK';		}										// Сохраняем личные настройки пользователя		public static function SettingsSave($params) {			$db = DB::getInstance();			$data = array(	'lang' => $params['lang']						 );			$db->update('users', $data, 'id LIKE "'.$params['uid'].'"');						// Устанавливаем новый язык из настроек			setcookie('Lang', $params['lang']);						return $params['uid'];		}	}?>